# ê³¼ì í•© ëª¨ë¸ ìƒì„± ê°€ì´ë“œ (í…ŒìŠ¤íŠ¸ìš©)

í…ŒìŠ¤íŠ¸ìš©ìœ¼ë¡œ í•™ìŠµ ë°ì´í„°ì— ì™„ë²½í•˜ê²Œ ë§ëŠ” ê³¼ì í•© ëª¨ë¸ì„ ë§Œë“œëŠ” ë°©ë²•ì…ë‹ˆë‹¤.

## ğŸ¯ ëª©í‘œ

- í•™ìŠµ ë°ì´í„°ì— ì™„ë²½í•˜ê²Œ ë§ì¶”ê¸° (ê³¼ì í•©)
- í”¼ë¶€ ì§ˆê°ì„ ë³´ì • ì „ì— ê°€ê¹ê²Œ ë³µì›
- í…ŒìŠ¤íŠ¸ ë°ì´í„°ë¡œ ë™ì‘ í™•ì¸

## ğŸ’¡ ê³¼ì í•© ìœ ë„ ë°©ë²•

### í•µì‹¬ ì „ëµ

1. **L1 Loss ê°€ì¤‘ì¹˜ ëŒ€í­ ì¦ê°€**: í”½ì…€ ë‹¨ìœ„ ì •í™•ë„ ê°•í™”
2. **ë” ë§ì€ ì—í¬í¬**: ì¶©ë¶„íˆ ì˜¤ë˜ í•™ìŠµ
3. **ì‘ì€ í•™ìŠµë¥ **: ì„¸ë°€í•œ ì¡°ì •
4. **ì‘ì€ ì´ë¯¸ì§€ í¬ê¸°**: ë” ë§ì€ iteration ê°€ëŠ¥

## ğŸš€ ê¶Œì¥ ëª…ë ¹ì–´

### ë°©ë²• 1: L1 Loss ê°•í™” + ë§ì€ ì—í¬í¬ (ê¶Œì¥)

```bash
python train.py --dataroot ./portrait_retouch --name portrait_retouch_reverse --model pix2pix --direction AtoB --batch_size 1 --load_size 512 --crop_size 512 --n_epochs 1000 --n_epochs_decay 1000 --lambda_L1 500.0 --lr 0.0001 --continue_train
```

**íŒŒë¼ë¯¸í„° ì„¤ëª…**:
- `--lambda_L1 500.0`: L1 loss ê°€ì¤‘ì¹˜ë¥¼ 5ë°°ë¡œ ì¦ê°€ (ê¸°ë³¸ê°’: 100.0)
  - íš¨ê³¼: í”½ì…€ ë‹¨ìœ„ ì •í™•ë„ ëŒ€í­ í–¥ìƒ, ì§ˆê° ë³µì› ê°•í™”
  - ì˜ˆ: `500.0` (ê°•ë ¥), `300.0` (ì¤‘ê°„), `200.0` (ë³´í†µ)
- `--n_epochs 1000`: ì´ˆê¸° í•™ìŠµ ì—í¬í¬ (ê¸°ì¡´ 200ì—ì„œ 5ë°° ì¦ê°€)
- `--n_epochs_decay 1000`: í•™ìŠµë¥  ê°ì†Œ ì—í¬í¬ (ê¸°ì¡´ 200ì—ì„œ 5ë°° ì¦ê°€)
- `--lr 0.0001`: í•™ìŠµë¥  ê°ì†Œ (ê¸°ë³¸ê°’: 0.0002ì˜ ì ˆë°˜)
  - íš¨ê³¼: ë” ì•ˆì •ì ì´ê³  ì„¸ë°€í•œ í•™ìŠµ
- `--load_size 512 --crop_size 512`: ì‘ì€ ì´ë¯¸ì§€ë¡œ ë” ë§ì€ iteration
- `--continue_train`: ê¸°ì¡´ ëª¨ë¸ì—ì„œ ì´ì–´ì„œ í•™ìŠµ

### ë°©ë²• 2: ê·¹ë‹¨ì ì¸ ê³¼ì í•© (ìµœëŒ€ ê°•ë„)

```bash
python train.py --dataroot ./portrait_retouch --name portrait_retouch_reverse --model pix2pix --direction AtoB --batch_size 1 --load_size 512 --crop_size 512 --n_epochs 2000 --n_epochs_decay 2000 --lambda_L1 1000.0 --lr 0.00005 --continue_train
```

**íŒŒë¼ë¯¸í„° ì„¤ëª…**:
- `--lambda_L1 1000.0`: L1 loss ê°€ì¤‘ì¹˜ë¥¼ 10ë°°ë¡œ ì¦ê°€
  - íš¨ê³¼: ë§¤ìš° ê°•ë ¥í•œ í”½ì…€ ë‹¨ìœ„ ì •í™•ë„
- `--n_epochs 2000 --n_epochs_decay 2000`: ë§¤ìš° ë§ì€ ì—í¬í¬
- `--lr 0.00005`: ë§¤ìš° ë‚®ì€ í•™ìŠµë¥ 
  - íš¨ê³¼: ë§¤ìš° ì„¸ë°€í•œ ì¡°ì •

### ë°©ë²• 3: ì¤‘ê°„ ê°•ë„ (ê· í˜•ì¡íŒ ì ‘ê·¼)

```bash
python train.py --dataroot ./portrait_retouch --name portrait_retouch_reverse --model pix2pix --direction AtoB --batch_size 1 --load_size 512 --crop_size 512 --n_epochs 800 --n_epochs_decay 800 --lambda_L1 300.0 --lr 0.0001 --continue_train
```

## ğŸ“Š íŒŒë¼ë¯¸í„°ë³„ íš¨ê³¼

### L1 Loss ê°€ì¤‘ì¹˜ (`--lambda_L1`)

| ê°’ | íš¨ê³¼ | ê¶Œì¥ ìƒí™© |
|---|------|----------|
| `100.0` (ê¸°ë³¸) | í‘œì¤€ | ì¼ë°˜ì ì¸ í•™ìŠµ |
| `200.0` | ì§ˆê° ë³µì› ê°•í™” | ì•½ê°„ì˜ ê°œì„  í•„ìš” |
| `300.0` | ê°•í•œ ì§ˆê° ë³µì› | ì¤‘ê°„ ê°•ë„ ê³¼ì í•© |
| `500.0` | ë§¤ìš° ê°•í•œ ì§ˆê° ë³µì› | ê°•í•œ ê³¼ì í•© |
| `1000.0` | ê·¹ë‹¨ì  ì§ˆê° ë³µì› | ìµœëŒ€ ê°•ë„ ê³¼ì í•© |

**ì£¼ì˜**: ë„ˆë¬´ ë†’ìœ¼ë©´ ìƒì„± ì´ë¯¸ì§€ê°€ ë¶€ìì—°ìŠ¤ëŸ¬ìš¸ ìˆ˜ ìˆìŒ

### í•™ìŠµë¥  (`--lr`)

| ê°’ | íš¨ê³¼ | í•™ìŠµ ì‹œê°„ |
|---|------|----------|
| `0.0002` (ê¸°ë³¸) | í‘œì¤€ ì†ë„ | ë¹ ë¦„ |
| `0.0001` | ì•ˆì •ì  í•™ìŠµ | ë³´í†µ |
| `0.00005` | ë§¤ìš° ì„¸ë°€í•œ í•™ìŠµ | ëŠë¦¼ |

### ì—í¬í¬ ìˆ˜

| ì—í¬í¬ | íš¨ê³¼ | í•™ìŠµ ì‹œê°„ |
|--------|------|----------|
| `400` (ê¸°ë³¸) | í‘œì¤€ | ë³´í†µ |
| `800` | ì¶©ë¶„í•œ í•™ìŠµ | 2ë°° |
| `1000` | ê°•í•œ ê³¼ì í•© | 2.5ë°° |
| `2000` | ê·¹ë‹¨ì  ê³¼ì í•© | 5ë°° |

## ğŸ” í•™ìŠµ ëª¨ë‹ˆí„°ë§

### ì¤‘ê°„ ê²°ê³¼ í™•ì¸

```bash
# HTML ê²°ê³¼ í™•ì¸
# ./checkpoints/portrait_retouch_reverse/web/index.html
```

í™•ì¸ ì‚¬í•­:
- `real_A` (ì…ë ¥): ë³´ì • í›„ ì´ë¯¸ì§€
- `real_B` (ì •ë‹µ): ë³´ì • ì „ ì´ë¯¸ì§€
- `fake_B` (ìƒì„±): ëª¨ë¸ì´ ìƒì„±í•œ ë³´ì • ì „ ì´ë¯¸ì§€
- `fake_B`ê°€ `real_B`ì— ê°€ê¹Œì›Œì§€ëŠ”ì§€ í™•ì¸

### ì†ì‹¤ê°’ í™•ì¸

```bash
# Windows
type checkpoints\portrait_retouch_reverse\loss_log.txt

# Linux/macOS
tail -f checkpoints/portrait_retouch_reverse/loss_log.txt
```

í™•ì¸ ì‚¬í•­:
- `G_L1`: L1 loss (ë‚®ì„ìˆ˜ë¡ ì¢‹ìŒ, 1.0 ì´í•˜ë¡œ ìˆ˜ë ´í•˜ë©´ ì¢‹ìŒ)
- `G_GAN`: GAN loss (ê· í˜• ìœ ì§€)
- `D_real`, `D_fake`: Discriminator loss

## ğŸ§ª í…ŒìŠ¤íŠ¸ ë°©ë²•

### 1. í•™ìŠµ ë°ì´í„°ë¡œ í…ŒìŠ¤íŠ¸ (ê³¼ì í•© í™•ì¸)

```bash
python test.py --dataroot ./portrait_retouch --name portrait_retouch_reverse --model pix2pix --direction AtoB --epoch latest --netG unet_256 --norm batch
```

**í™•ì¸ ì‚¬í•­**:
- `fake_B`ê°€ `real_B`ì— ë§¤ìš° ê°€ê¹Œìš´ì§€ í™•ì¸
- í”¼ë¶€ ì§ˆê°ì´ ì˜ ë³µì›ë˜ì—ˆëŠ”ì§€ í™•ì¸

### 2. ìƒˆë¡œìš´ ì´ë¯¸ì§€ë¡œ í…ŒìŠ¤íŠ¸ (ì¼ë°˜í™” í™•ì¸)

```bash
python test.py --dataroot ./test_images/test --name portrait_retouch_reverse --model test --direction AtoB --dataset_mode single --epoch latest --netG unet_256 --norm batch
```

**í™•ì¸ ì‚¬í•­**:
- ìƒˆë¡œìš´ ì´ë¯¸ì§€ì—ì„œë„ ì˜ ì‘ë™í•˜ëŠ”ì§€ í™•ì¸
- ê³¼ì í•©ì´ ì‹¬í•˜ë©´ ìƒˆë¡œìš´ ì´ë¯¸ì§€ì—ì„œ ì„±ëŠ¥ ì €í•˜

## âš ï¸ ì£¼ì˜ì‚¬í•­

### ê³¼ì í•©ì˜ ë‹¨ì 

1. **í•™ìŠµ ë°ì´í„°ì—ë§Œ ë§ì¶¤**: í•™ìŠµì— ì‚¬ìš©í•œ 3ê°œ ì´ë¯¸ì§€ì—ë§Œ ì˜ ì‘ë™
2. **ì¼ë°˜í™” ì‹¤íŒ¨**: ìƒˆë¡œìš´ ì´ë¯¸ì§€ì—ì„œëŠ” ì„±ëŠ¥ ì €í•˜
3. **ë¶€ìì—°ìŠ¤ëŸ¬ìš´ ê²°ê³¼**: L1 lossê°€ ë„ˆë¬´ ë†’ìœ¼ë©´ ë¶€ìì—°ìŠ¤ëŸ¬ìš¸ ìˆ˜ ìˆìŒ

### ê· í˜•ì  ì°¾ê¸°

- ë„ˆë¬´ ë‚®ì€ L1: ì§ˆê° ë³µì› ì‹¤íŒ¨
- ë„ˆë¬´ ë†’ì€ L1: ë¶€ìì—°ìŠ¤ëŸ¬ìš´ ê²°ê³¼
- ì ì ˆí•œ ê°’: 300-500 ì‚¬ì´ ê¶Œì¥

## ğŸ“ ë‹¨ê³„ë³„ ì ‘ê·¼

### Step 1: ì¤‘ê°„ ê°•ë„ë¡œ ì‹œì‘

```bash
python train.py --dataroot ./portrait_retouch --name portrait_retouch_reverse --model pix2pix --direction AtoB --batch_size 1 --load_size 512 --crop_size 512 --n_epochs 800 --n_epochs_decay 800 --lambda_L1 300.0 --lr 0.0001 --continue_train
```

### Step 2: ê²°ê³¼ í™•ì¸ í›„ ì¡°ì •

ê²°ê³¼ë¥¼ í™•ì¸í•˜ê³ :
- ì§ˆê°ì´ ë¶€ì¡±í•˜ë©´: `--lambda_L1` ì¦ê°€ (400.0, 500.0)
- ë¶€ìì—°ìŠ¤ëŸ¬ìš°ë©´: `--lambda_L1` ê°ì†Œ (200.0)
- ë” í•™ìŠµ í•„ìš”í•˜ë©´: ì—í¬í¬ ì¦ê°€

### Step 3: ìµœì¢… í…ŒìŠ¤íŠ¸

```bash
python test.py --dataroot ./portrait_retouch --name portrait_retouch_reverse --model pix2pix --direction AtoB --epoch latest --netG unet_256 --norm batch
```

## ğŸ¯ ìµœì¢… ê¶Œì¥ ëª…ë ¹ì–´

### í”¼ë¶€ ì§ˆê° ë³µì› ê°•í™” (ê¶Œì¥)

```bash
python train.py --dataroot ./portrait_retouch --name portrait_retouch_reverse --model pix2pix --direction AtoB --batch_size 1 --load_size 512 --crop_size 512 --n_epochs 1000 --n_epochs_decay 1000 --lambda_L1 500.0 --lr 0.0001 --continue_train
```

**ì´ìœ **:
- L1 loss 5ë°° ì¦ê°€ë¡œ ì§ˆê° ë³µì› ê°•í™”
- ë§ì€ ì—í¬í¬ë¡œ ì¶©ë¶„í•œ í•™ìŠµ
- ë‚®ì€ í•™ìŠµë¥ ë¡œ ì„¸ë°€í•œ ì¡°ì •
- ì‘ì€ ì´ë¯¸ì§€ë¡œ ë” ë§ì€ iteration

## ğŸ’¡ ì¶”ê°€ íŒ

### í•™ìŠµ ì¤‘ê°„ í™•ì¸

ì£¼ê¸°ì ìœ¼ë¡œ ì¤‘ê°„ ê²°ê³¼ë¥¼ í™•ì¸:
```bash
# ./checkpoints/portrait_retouch_reverse/web/index.html
```

### ì¡°ê¸° ì¤‘ë‹¨

ë§Œì¡±ìŠ¤ëŸ¬ìš´ ê²°ê³¼ê°€ ë‚˜ì˜¤ë©´ ì¡°ê¸° ì¤‘ë‹¨ ê°€ëŠ¥:
- `Ctrl+C`ë¡œ ì¤‘ë‹¨
- ìµœì‹  ì²´í¬í¬ì¸íŠ¸ê°€ ì €ì¥ë¨ (`latest_net_G.pth`)

### ì—¬ëŸ¬ ì‹¤í—˜ ë¹„êµ

ë‹¤ë¥¸ ì´ë¦„ìœ¼ë¡œ ì‹¤í—˜í•˜ì—¬ ë¹„êµ:
```bash
# ì‹¤í—˜ 1
python train.py ... --name exp_l1_300 --lambda_L1 300.0

# ì‹¤í—˜ 2
python train.py ... --name exp_l1_500 --lambda_L1 500.0

# ì‹¤í—˜ 3
python train.py ... --name exp_l1_1000 --lambda_L1 1000.0
```

ê° ì‹¤í—˜ ê²°ê³¼ë¥¼ ë¹„êµí•˜ì—¬ ìµœì ê°’ ì°¾ê¸°

